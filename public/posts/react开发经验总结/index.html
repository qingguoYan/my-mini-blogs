<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Reactå¼€å‘ç»éªŒæ€»ç»“ | é—«åº†å›½çš„ä¸ªäººç½‘ç«™</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="æ·±å…¥æ¢è®¨Reactå¼€å‘ä¸­çš„æ€§èƒ½ä¼˜åŒ–ã€ç»„ä»¶è®¾è®¡ã€çŠ¶æ€ç®¡ç†ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œç»“åˆå®æˆ˜ç»éªŒåˆ†äº«æœ€ä½³å®è·µ">
<meta name="generator" content="Hugo 0.147.7">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />








  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>é¦–é¡µ</a>
	
	<a href="/posts">å½’æ¡£</a>
	<a href="/tags">æ ‡ç­¾</a>
	<a href="/about">å…³äº</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">Reactå¼€å‘ç»éªŒæ€»ç»“</h1>

    <div class="tip">
        <time datetime="2025-06-05 00:00:00 &#43;0000 UTC">2025å¹´06æœˆ05æ—¥</time>
        <span class="split">
          Â·
        </span>
        <span>
          2573å­—
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          6åˆ†é’Ÿ
        </span>
    </div>


    <div class="content">
      <div>
        <p>å†™å‡ºæ›´å¥½çš„ React ä»£ç  ğŸš€</p>
<h2 id="æ·±å…¥ç†è§£ç»„ä»¶æ¸²æŸ“ä¼˜åŒ–">æ·±å…¥ç†è§£ç»„ä»¶æ¸²æŸ“ä¼˜åŒ– <a href="#%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e7%bb%84%e4%bb%b6%e6%b8%b2%e6%9f%93%e4%bc%98%e5%8c%96" class="anchor">ğŸ”—</a></h2><h3 id="ä½•æ—¶ä½¿ç”¨-reactmemo">ä½•æ—¶ä½¿ç”¨ React.memo <a href="#%e4%bd%95%e6%97%b6%e4%bd%bf%e7%94%a8-reactmemo" class="anchor">ğŸ”—</a></h3><p>åœ¨ React åº”ç”¨ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥æ˜¯é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚<code>React.memo</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½†å®ƒçš„ä½¿ç”¨éœ€è¦éµå¾ªä¸€äº›åŸåˆ™ï¼š</p>
<p>ä½¿ç”¨ memo æ—¶éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li><strong>å¼•ç”¨ç±»å‹å±æ€§å¤„ç†</strong>ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// çˆ¶ç»„ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> Parent <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  <span style="color:#a2f;font-weight:bold">const</span> handleClick <span style="color:#666">=</span> useCallback(() =&gt; {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#b44">&#34;clicked&#34;</span>);
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// ä½¿ç”¨ useMemo ç¼“å­˜å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  <span style="color:#a2f;font-weight:bold">const</span> config <span style="color:#666">=</span> useMemo(
</span></span><span style="display:flex;"><span>    () =&gt; ({
</span></span><span style="display:flex;"><span>      color<span style="color:#666">:</span> <span style="color:#b44">&#34;blue&#34;</span>,
</span></span><span style="display:flex;"><span>      fontSize<span style="color:#666">:</span> <span style="color:#666">14</span>,
</span></span><span style="display:flex;"><span>    }),
</span></span><span style="display:flex;"><span>    []
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">Child</span> <span style="color:#b44">onClick</span><span style="color:#666">=</span>{handleClick} <span style="color:#b44">config</span><span style="color:#666">=</span>{config} /&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol start="2">
<li><strong>é¿å…è¿‡åº¦ä¼˜åŒ–</strong>ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ è¿‡åº¦ä¼˜åŒ–çš„ä¾‹å­
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> SimpleText <span style="color:#666">=</span> React.memo((props) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">span</span>&gt;{props.text}&lt;/<span style="color:#008000;font-weight:bold">span</span>&gt;;
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… ä¸éœ€è¦ memo çš„ç®€å•ç»„ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> SimpleText <span style="color:#666">=</span> (props) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">span</span>&gt;{props.text}&lt;/<span style="color:#008000;font-weight:bold">span</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="ç»„ä»¶è®¾è®¡çš„è‰ºæœ¯">ç»„ä»¶è®¾è®¡çš„è‰ºæœ¯ <a href="#%e7%bb%84%e4%bb%b6%e8%ae%be%e8%ae%a1%e7%9a%84%e8%89%ba%e6%9c%af" class="anchor">ğŸ”—</a></h2><h3 id="ç»„ä»¶åˆ†å±‚æ¶æ„">ç»„ä»¶åˆ†å±‚æ¶æ„ <a href="#%e7%bb%84%e4%bb%b6%e5%88%86%e5%b1%82%e6%9e%b6%e6%9e%84" class="anchor">ğŸ”—</a></h3><p>åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæ¨èé‡‡ç”¨ä»¥ä¸‹åˆ†å±‚æ¶æ„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// 1. å±•ç¤ºç»„ä»¶ (Presentational Components)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> UserCard <span style="color:#666">=</span> ({ name, avatar, role }) =&gt; (
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#008000;font-weight:bold">div</span> <span style="color:#b44">className</span><span style="color:#666">=</span><span style="color:#b44">&#34;user-card&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">img</span> <span style="color:#b44">src</span><span style="color:#666">=</span>{avatar} <span style="color:#b44">alt</span><span style="color:#666">=</span>{name} /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">h3</span>&gt;{name}&lt;/<span style="color:#008000;font-weight:bold">h3</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">span</span>&gt;{role}&lt;/<span style="color:#008000;font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// 2. å®¹å™¨ç»„ä»¶ (Container Components)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> UserListContainer <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [users, setUsers] <span style="color:#666">=</span> useState([]);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [loading, setLoading] <span style="color:#666">=</span> useState(<span style="color:#a2f;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    fetchUsers().then((data) =&gt; setUsers(data));
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> loading <span style="color:#666">?</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">Loading</span> /&gt;
</span></span><span style="display:flex;"><span>  ) <span style="color:#666">:</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">div</span> <span style="color:#b44">className</span><span style="color:#666">=</span><span style="color:#b44">&#34;user-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {users.map((user) =&gt; (
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#008000;font-weight:bold">UserCard</span> <span style="color:#b44">key</span><span style="color:#666">=</span>{user.id} {<span style="color:#b44">...user</span>} /&gt;
</span></span><span style="display:flex;"><span>      ))}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// 3. é¡µé¢ç»„ä»¶ (Page Components)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> UserManagementPage <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">Layout</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#008000;font-weight:bold">Header</span> <span style="color:#b44">title</span><span style="color:#666">=</span><span style="color:#b44">&#34;ç”¨æˆ·ç®¡ç†&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#008000;font-weight:bold">UserListContainer</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#008000;font-weight:bold">Footer</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#008000;font-weight:bold">Layout</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="ç»„ä»¶é€šä¿¡æœ€ä½³å®è·µ">ç»„ä»¶é€šä¿¡æœ€ä½³å®è·µ <a href="#%e7%bb%84%e4%bb%b6%e9%80%9a%e4%bf%a1%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" class="anchor">ğŸ”—</a></h3><ol>
<li><strong>Props é€ä¼ é—®é¢˜</strong>ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ ä¸æ¨èï¼šprops å±‚å±‚ä¼ é€’
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> Grandfather <span style="color:#666">=</span> ({ userData }) =&gt; &lt;<span style="color:#008000;font-weight:bold">Father</span> <span style="color:#b44">userData</span><span style="color:#666">=</span>{userData} /&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> Father <span style="color:#666">=</span> ({ userData }) =&gt; &lt;<span style="color:#008000;font-weight:bold">Son</span> <span style="color:#b44">userData</span><span style="color:#666">=</span>{userData} /&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… æ¨èï¼šä½¿ç”¨ Context
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> UserContext <span style="color:#666">=</span> React.createContext(<span style="color:#a2f;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> Grandfather <span style="color:#666">=</span> ({ userData }) =&gt; (
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#008000;font-weight:bold">UserContext.Provider</span> <span style="color:#b44">value</span><span style="color:#666">=</span>{userData}&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">Father</span> /&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#008000;font-weight:bold">UserContext.Provider</span>&gt;
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> Son <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> userData <span style="color:#666">=</span> useContext(UserContext);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;{userData.name}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ">çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ <a href="#%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86%e7%9a%84%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" class="anchor">ğŸ”—</a></h2><h3 id="æœ¬åœ°çŠ¶æ€ç®¡ç†">æœ¬åœ°çŠ¶æ€ç®¡ç† <a href="#%e6%9c%ac%e5%9c%b0%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… ä½¿ç”¨ useState çš„æœ€ä½³å®è·µ
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> TodoList <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// 1. çŠ¶æ€èšåˆ
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  <span style="color:#a2f;font-weight:bold">const</span> [todoState, setTodoState] <span style="color:#666">=</span> useState({
</span></span><span style="display:flex;"><span>    items<span style="color:#666">:</span> [],
</span></span><span style="display:flex;"><span>    loading<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span>,
</span></span><span style="display:flex;"><span>    error<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// 2. çŠ¶æ€æ›´æ–°å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  <span style="color:#a2f;font-weight:bold">const</span> addTodo <span style="color:#666">=</span> useCallback((newTodo) =&gt; {
</span></span><span style="display:flex;"><span>    setTodoState(prev =&gt; ({
</span></span><span style="display:flex;"><span>      ...prev,
</span></span><span style="display:flex;"><span>      items<span style="color:#666">:</span> [...prev.items, newTodo]
</span></span><span style="display:flex;"><span>    }));
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// 3. æ´¾ç”ŸçŠ¶æ€
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  <span style="color:#a2f;font-weight:bold">const</span> completedCount <span style="color:#666">=</span> useMemo(() =&gt;
</span></span><span style="display:flex;"><span>    todoState.items.filter(item =&gt; item.completed).length,
</span></span><span style="display:flex;"><span>    [todoState.items]
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (<span style="color:#080;font-style:italic">/* æ¸²æŸ“é€»è¾‘ */</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="å…¨å±€çŠ¶æ€ç®¡ç†">å…¨å±€çŠ¶æ€ç®¡ç† <a href="#%e5%85%a8%e5%b1%80%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86" class="anchor">ğŸ”—</a></h3><p>åœ¨é€‰æ‹©çŠ¶æ€ç®¡ç†æ–¹æ¡ˆæ—¶ï¼Œå»ºè®®ï¼š</p>
<ol>
<li><strong>å°å‹åº”ç”¨</strong>ï¼šContext + useReducer</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// å®šä¹‰ action ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> TodoActions <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>  ADD_TODO<span style="color:#666">:</span> <span style="color:#b44">&#34;ADD_TODO&#34;</span>,
</span></span><span style="display:flex;"><span>  TOGGLE_TODO<span style="color:#666">:</span> <span style="color:#b44">&#34;TOGGLE_TODO&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// åˆ›å»º reducer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> todoReducer <span style="color:#666">=</span> (state, action) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">switch</span> (action.type) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">case</span> TodoActions.ADD_TODO<span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>        ...state,
</span></span><span style="display:flex;"><span>        todos<span style="color:#666">:</span> [...state.todos, action.payload],
</span></span><span style="display:flex;"><span>      };
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// ...å…¶ä»– case
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ä½¿ç”¨ Provider
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> TodoProvider <span style="color:#666">=</span> ({ children }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [state, dispatch] <span style="color:#666">=</span> useReducer(todoReducer, initialState);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">TodoContext.Provider</span> <span style="color:#b44">value</span><span style="color:#666">=</span>{{ state, dispatch }}&gt;
</span></span><span style="display:flex;"><span>      {children}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#008000;font-weight:bold">TodoContext.Provider</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol start="2">
<li><strong>ä¸­å¤§å‹åº”ç”¨</strong>ï¼šRedux/Zustand</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// Zustand ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">import</span> create from <span style="color:#b44">&#34;zustand&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> useStore <span style="color:#666">=</span> create((set) =&gt; ({
</span></span><span style="display:flex;"><span>  todos<span style="color:#666">:</span> [],
</span></span><span style="display:flex;"><span>  addTodo<span style="color:#666">:</span> (todo) =&gt;
</span></span><span style="display:flex;"><span>    set((state) =&gt; ({
</span></span><span style="display:flex;"><span>      todos<span style="color:#666">:</span> [...state.todos, todo],
</span></span><span style="display:flex;"><span>    })),
</span></span><span style="display:flex;"><span>  toggleTodo<span style="color:#666">:</span> (id) =&gt;
</span></span><span style="display:flex;"><span>    set((state) =&gt; ({
</span></span><span style="display:flex;"><span>      todos<span style="color:#666">:</span> state.todos.map((todo) =&gt;
</span></span><span style="display:flex;"><span>        todo.id <span style="color:#666">===</span> id <span style="color:#666">?</span> { ...todo, completed<span style="color:#666">:</span> <span style="color:#666">!</span>todo.completed } <span style="color:#666">:</span> todo
</span></span><span style="display:flex;"><span>      ),
</span></span><span style="display:flex;"><span>    })),
</span></span><span style="display:flex;"><span>}));
</span></span></code></pre></div><h2 id="react-18-æ–°ç‰¹æ€§åº”ç”¨">React 18 æ–°ç‰¹æ€§åº”ç”¨ <a href="#react-18-%e6%96%b0%e7%89%b9%e6%80%a7%e5%ba%94%e7%94%a8" class="anchor">ğŸ”—</a></h2><h3 id="å¹¶å‘æ¸²æŸ“å®è·µ">å¹¶å‘æ¸²æŸ“å®è·µ <a href="#%e5%b9%b6%e5%8f%91%e6%b8%b2%e6%9f%93%e5%ae%9e%e8%b7%b5" class="anchor">ğŸ”—</a></h3><ol>
<li><strong>useTransition ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</strong>ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> SearchComponent <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [query, setQuery] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [isPending, startTransition] <span style="color:#666">=</span> useTransition();
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [searchResults, setSearchResults] <span style="color:#666">=</span> useState([]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> handleSearch <span style="color:#666">=</span> (e) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// ç«‹å³æ›´æ–°è¾“å…¥å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    setQuery(e.target.value);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// å°†æœç´¢é€»è¾‘æ”¾åœ¨ transition ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    startTransition(() =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">const</span> results <span style="color:#666">=</span> performExpensiveSearch(e.target.value);
</span></span><span style="display:flex;"><span>      setSearchResults(results);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#008000;font-weight:bold">input</span> <span style="color:#b44">value</span><span style="color:#666">=</span>{query} <span style="color:#b44">onChange</span><span style="color:#666">=</span>{handleSearch} /&gt;
</span></span><span style="display:flex;"><span>      {isPending <span style="color:#666">?</span> &lt;<span style="color:#008000;font-weight:bold">Spinner</span> /&gt; <span style="color:#666">:</span> &lt;<span style="color:#008000;font-weight:bold">SearchResults</span> <span style="color:#b44">results</span><span style="color:#666">=</span>{searchResults} /&gt;}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol start="2">
<li><strong>useDeferredValue å¤„ç†æ˜‚è´µçš„æ¸²æŸ“</strong>ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> Chart <span style="color:#666">=</span> memo(({ data }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// å¤æ‚çš„å›¾è¡¨æ¸²æŸ“é€»è¾‘
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> ChartContainer <span style="color:#666">=</span> ({ data }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> deferredData <span style="color:#666">=</span> useDeferredValue(data);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#008000;font-weight:bold">Chart</span> <span style="color:#b44">data</span><span style="color:#666">=</span>{deferredData} /&gt;
</span></span><span style="display:flex;"><span>      {deferredData <span style="color:#666">!==</span> data <span style="color:#666">&amp;&amp;</span> &lt;<span style="color:#008000;font-weight:bold">Spinner</span> /&gt;}
</span></span><span style="display:flex;"><span>    &lt;/&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–">åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ– <a href="#%e5%88%97%e8%a1%a8%e6%b8%b2%e6%9f%93%e4%bc%98%e5%8c%96" class="anchor">ğŸ”—</a></h2><h3 id="è™šæ‹Ÿåˆ—è¡¨å®ç°">è™šæ‹Ÿåˆ—è¡¨å®ç° <a href="#%e8%99%9a%e6%8b%9f%e5%88%97%e8%a1%a8%e5%ae%9e%e7%8e%b0" class="anchor">ğŸ”—</a></h3><p>å¯¹äºé•¿åˆ—è¡¨ï¼Œå»ºè®®ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span> { FixedSizeList } from <span style="color:#b44">&#34;react-window&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> VirtualizedList <span style="color:#666">=</span> ({ items }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> Row <span style="color:#666">=</span> ({ index, style }) =&gt; (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">div</span> <span style="color:#b44">style</span><span style="color:#666">=</span>{style}&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#008000;font-weight:bold">ListItem</span> <span style="color:#b44">data</span><span style="color:#666">=</span>{items[index]} /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#008000;font-weight:bold">FixedSizeList</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">height</span><span style="color:#666">=</span>{<span style="color:#666">400</span>}
</span></span><span style="display:flex;"><span>      <span style="color:#b44">width</span><span style="color:#666">=</span><span style="color:#b44">&#34;100%&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">itemCount</span><span style="color:#666">=</span>{items.length}
</span></span><span style="display:flex;"><span>      <span style="color:#b44">itemSize</span><span style="color:#666">=</span>{<span style="color:#666">50</span>}
</span></span><span style="display:flex;"><span>    &gt;
</span></span><span style="display:flex;"><span>      {Row}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#008000;font-weight:bold">FixedSizeList</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="key-çš„æœ€ä½³å®è·µ">Key çš„æœ€ä½³å®è·µ <a href="#key-%e7%9a%84%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ é¿å…ä½¿ç”¨ç´¢å¼•ä½œä¸º key
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  items.map((item, index) =&gt; &lt;<span style="color:#008000;font-weight:bold">ListItem</span> <span style="color:#b44">key</span><span style="color:#666">=</span>{index} <span style="color:#b44">data</span><span style="color:#666">=</span>{item} /&gt;);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… ä½¿ç”¨å”¯ä¸€æ ‡è¯†ä½œä¸º key
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  items.map((item) =&gt; &lt;<span style="color:#008000;font-weight:bold">ListItem</span> <span style="color:#b44">key</span><span style="color:#666">=</span>{item.id} <span style="color:#b44">data</span><span style="color:#666">=</span>{item} /&gt;);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// å¦‚æœæ²¡æœ‰å”¯ä¸€ IDï¼Œå¯ä»¥è¿™æ ·ç”Ÿæˆ
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> generateKey <span style="color:#666">=</span> (item, index) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#b44">`</span><span style="color:#b68;font-weight:bold">${</span>item.type<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">_</span><span style="color:#b68;font-weight:bold">${</span>item.name<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">_</span><span style="color:#b68;font-weight:bold">${</span>index<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ">æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ <a href="#%e6%95%b0%e6%8d%ae%e6%8c%81%e4%b9%85%e5%8c%96%e6%96%b9%e6%a1%88" class="anchor">ğŸ”—</a></h2><h3 id="æœ¬åœ°å­˜å‚¨å®ç°">æœ¬åœ°å­˜å‚¨å®ç° <a href="#%e6%9c%ac%e5%9c%b0%e5%ad%98%e5%82%a8%e5%ae%9e%e7%8e%b0" class="anchor">ğŸ”—</a></h3><p>ä½¿ç”¨ redux-persist å®ç°æœ¬åœ°æ•°æ®æŒä¹…åŒ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span> { createStore } from <span style="color:#b44">&#34;redux&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span> { persistStore, persistReducer } from <span style="color:#b44">&#34;redux-persist&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span> storage from <span style="color:#b44">&#34;redux-persist/lib/storage&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> persistConfig <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>  key<span style="color:#666">:</span> <span style="color:#b44">&#34;root&#34;</span>,
</span></span><span style="display:flex;"><span>  storage<span style="color:#666">:</span> storage,
</span></span><span style="display:flex;"><span>  whitelist<span style="color:#666">:</span> [<span style="color:#b44">&#34;user&#34;</span>, <span style="color:#b44">&#34;settings&#34;</span>], <span style="color:#080;font-style:italic">// åªæŒä¹…åŒ–ç‰¹å®š reducer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> persistedReducer <span style="color:#666">=</span> persistReducer(persistConfig, rootReducer);
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> store <span style="color:#666">=</span> createStore(persistedReducer);
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> persistor <span style="color:#666">=</span> persistStore(store);
</span></span></code></pre></div><h3 id="æœåŠ¡å™¨å­˜å‚¨å®ç°">æœåŠ¡å™¨å­˜å‚¨å®ç° <a href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%ad%98%e5%82%a8%e5%ae%9e%e7%8e%b0" class="anchor">ğŸ”—</a></h3><p>è‡ªå®šä¹‰ storage å¼•æ“å®ç°æœåŠ¡ç«¯æŒä¹…åŒ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> customStorage <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">async</span> getItem(key) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">const</span> response <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">await</span> fetch(<span style="color:#b44">`/api/state/</span><span style="color:#b68;font-weight:bold">${</span>key<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>, {
</span></span><span style="display:flex;"><span>        headers<span style="color:#666">:</span> {
</span></span><span style="display:flex;"><span>          Authorization<span style="color:#666">:</span> <span style="color:#b44">`Bearer </span><span style="color:#b68;font-weight:bold">${</span>getToken()<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#b44">&#34;Content-Type&#34;</span><span style="color:#666">:</span> <span style="color:#b44">&#34;application/json&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>response.ok) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">throw</span> <span style="color:#a2f;font-weight:bold">new</span> <span style="color:#a2f">Error</span>(<span style="color:#b44">&#34;è·å–çŠ¶æ€å¤±è´¥&#34;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">const</span> data <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">await</span> response.json();
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">return</span> JSON.stringify(data.state);
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">catch</span> (err) {
</span></span><span style="display:flex;"><span>      console.error(<span style="color:#b44">&#34;ä»æœåŠ¡å™¨è·å–çŠ¶æ€å¤±è´¥:&#34;</span>, err);
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">async</span> setItem(key, value) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">const</span> response <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">await</span> fetch(<span style="color:#b44">`/api/state/</span><span style="color:#b68;font-weight:bold">${</span>key<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>, {
</span></span><span style="display:flex;"><span>        method<span style="color:#666">:</span> <span style="color:#b44">&#34;POST&#34;</span>,
</span></span><span style="display:flex;"><span>        headers<span style="color:#666">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#b44">&#34;Content-Type&#34;</span><span style="color:#666">:</span> <span style="color:#b44">&#34;application/json&#34;</span>,
</span></span><span style="display:flex;"><span>          Authorization<span style="color:#666">:</span> <span style="color:#b44">`Bearer </span><span style="color:#b68;font-weight:bold">${</span>getToken()<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        body<span style="color:#666">:</span> JSON.stringify({
</span></span><span style="display:flex;"><span>          state<span style="color:#666">:</span> JSON.parse(value),
</span></span><span style="display:flex;"><span>          timestamp<span style="color:#666">:</span> <span style="color:#a2f">Date</span>.now(),
</span></span><span style="display:flex;"><span>        }),
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>response.ok) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">throw</span> <span style="color:#a2f;font-weight:bold">new</span> <span style="color:#a2f">Error</span>(<span style="color:#b44">&#34;ä¿å­˜çŠ¶æ€å¤±è´¥&#34;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">catch</span> (err) {
</span></span><span style="display:flex;"><span>      console.error(<span style="color:#b44">&#34;ä¿å­˜çŠ¶æ€åˆ°æœåŠ¡å™¨å¤±è´¥:&#34;</span>, err);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">async</span> removeItem(key) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">const</span> response <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">await</span> fetch(<span style="color:#b44">`/api/state/</span><span style="color:#b68;font-weight:bold">${</span>key<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>, {
</span></span><span style="display:flex;"><span>        method<span style="color:#666">:</span> <span style="color:#b44">&#34;DELETE&#34;</span>,
</span></span><span style="display:flex;"><span>        headers<span style="color:#666">:</span> {
</span></span><span style="display:flex;"><span>          Authorization<span style="color:#666">:</span> <span style="color:#b44">`Bearer </span><span style="color:#b68;font-weight:bold">${</span>getToken()<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>response.ok) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">throw</span> <span style="color:#a2f;font-weight:bold">new</span> <span style="color:#a2f">Error</span>(<span style="color:#b44">&#34;åˆ é™¤çŠ¶æ€å¤±è´¥&#34;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">catch</span> (err) {
</span></span><span style="display:flex;"><span>      console.error(<span style="color:#b44">&#34;ä»æœåŠ¡å™¨åˆ é™¤çŠ¶æ€å¤±è´¥:&#34;</span>, err);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// é…ç½® redux-persist ä½¿ç”¨è‡ªå®šä¹‰ storage
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> persistConfig <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>  key<span style="color:#666">:</span> <span style="color:#b44">&#34;root&#34;</span>,
</span></span><span style="display:flex;"><span>  storage<span style="color:#666">:</span> customStorage,
</span></span><span style="display:flex;"><span>  timeout<span style="color:#666">:</span> <span style="color:#666">10000</span>, <span style="color:#080;font-style:italic">// è®¾ç½®è¶…æ—¶æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  whitelist<span style="color:#666">:</span> [<span style="color:#b44">&#34;user&#34;</span>, <span style="color:#b44">&#34;settings&#34;</span>],
</span></span><span style="display:flex;"><span>  writeFailHandler<span style="color:#666">:</span> (err) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// å¤„ç†å†™å…¥å¤±è´¥çš„æƒ…å†µ
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    console.error(<span style="color:#b44">&#34;State æŒä¹…åŒ–å¤±è´¥:&#34;</span>, err);
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨-useeffect">ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨ useEffect <a href="#%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e9%9c%80%e8%a6%81%e4%bd%bf%e7%94%a8-useeffect" class="anchor">ğŸ”—</a></h2><p>åœ¨ React å¼€å‘ä¸­ï¼ŒuseEffect æ˜¯æœ€å®¹æ˜“è¢«è¿‡åº¦ä½¿ç”¨çš„ Hook ä¹‹ä¸€ã€‚å¾ˆå¤šå¼€å‘è€…å€¾å‘äºæŠŠæ‰€æœ‰çš„å‰¯ä½œç”¨éƒ½æ”¾åœ¨ useEffect ä¸­ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä¸å¿…è¦çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»€ä¹ˆæ—¶å€™å¯ä»¥é¿å…ä½¿ç”¨ useEffectã€‚</p>
<h3 id="1-äº‹ä»¶å¤„ç†ä¸­çš„å‰¯ä½œç”¨">1. äº‹ä»¶å¤„ç†ä¸­çš„å‰¯ä½œç”¨ <a href="#1-%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86%e4%b8%ad%e7%9a%84%e5%89%af%e4%bd%9c%e7%94%a8" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ ä¸å¿…è¦çš„ useEffect
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> SearchComponent <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [query, setQuery] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (query) {
</span></span><span style="display:flex;"><span>      performSearch(query);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, [query]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">input</span> <span style="color:#b44">value</span><span style="color:#666">=</span>{query} <span style="color:#b44">onChange</span><span style="color:#666">=</span>{(e) =&gt; setQuery(e.target.value)} /&gt;;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… æ›´å¥½çš„æ–¹å¼ï¼šç›´æ¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> SearchComponent <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [query, setQuery] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> handleChange <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">async</span> (e) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> newQuery <span style="color:#666">=</span> e.target.value;
</span></span><span style="display:flex;"><span>    setQuery(newQuery);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (newQuery) {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">await</span> performSearch(newQuery);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">input</span> <span style="color:#b44">value</span><span style="color:#666">=</span>{query} <span style="color:#b44">onChange</span><span style="color:#666">=</span>{handleChange} /&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="2-props-æ”¹å˜åçš„è®¡ç®—">2. props æ”¹å˜åçš„è®¡ç®— <a href="#2-props-%e6%94%b9%e5%8f%98%e5%90%8e%e7%9a%84%e8%ae%a1%e7%ae%97" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ ä¸å¿…è¦çš„ useEffect
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> ProductCard <span style="color:#666">=</span> ({ price, quantity }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [total, setTotal] <span style="color:#666">=</span> useState(<span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    setTotal(price <span style="color:#666">*</span> quantity);
</span></span><span style="display:flex;"><span>  }, [price, quantity]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;æ€»ä»·<span style="">ï¼š</span>{total}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… ä½¿ç”¨è®¡ç®—å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> ProductCard <span style="color:#666">=</span> ({ price, quantity }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> total <span style="color:#666">=</span> price <span style="color:#666">*</span> quantity;
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;æ€»ä»·<span style="">ï¼š</span>{total}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// å¦‚æœè®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨ useMemo
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> ProductCard <span style="color:#666">=</span> ({ price, quantity, discount }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> total <span style="color:#666">=</span> useMemo(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> calculateComplexTotal(price, quantity, discount);
</span></span><span style="display:flex;"><span>  }, [price, quantity, discount]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;æ€»ä»·<span style="">ï¼š</span>{total}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="3-çŠ¶æ€è”åŠ¨æ›´æ–°">3. çŠ¶æ€è”åŠ¨æ›´æ–° <a href="#3-%e7%8a%b6%e6%80%81%e8%81%94%e5%8a%a8%e6%9b%b4%e6%96%b0" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ é¿å…ä½¿ç”¨ useEffect è¿›è¡ŒçŠ¶æ€è”åŠ¨
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> Form <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [firstName, setFirstName] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [lastName, setLastName] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [fullName, setFullName] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    setFullName(<span style="color:#b44">`</span><span style="color:#b68;font-weight:bold">${</span>firstName<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44"> </span><span style="color:#b68;font-weight:bold">${</span>lastName<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>);
</span></span><span style="display:flex;"><span>  }, [firstName, lastName]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (<span style="color:#080;font-style:italic">/* æ¸²æŸ“é€»è¾‘ */</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… ç›´æ¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ›´æ–°å…³è”çŠ¶æ€
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> Form <span style="color:#666">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [firstName, setFirstName] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [lastName, setLastName] <span style="color:#666">=</span> useState(<span style="color:#b44">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> handleFirstNameChange <span style="color:#666">=</span> (e) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> newFirstName <span style="color:#666">=</span> e.target.value;
</span></span><span style="display:flex;"><span>    setFirstName(newFirstName);
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-style:italic">// æˆ–è€…ä½¿ç”¨æ´¾ç”ŸçŠ¶æ€
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  <span style="color:#a2f;font-weight:bold">const</span> fullName <span style="color:#666">=</span> <span style="color:#b44">`</span><span style="color:#b68;font-weight:bold">${</span>firstName<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44"> </span><span style="color:#b68;font-weight:bold">${</span>lastName<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">`</span>.trim();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (<span style="color:#080;font-style:italic">/* æ¸²æŸ“é€»è¾‘ */</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="4-æ•°æ®è¯·æ±‚">4. æ•°æ®è¯·æ±‚ <a href="#4-%e6%95%b0%e6%8d%ae%e8%af%b7%e6%b1%82" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ğŸ”´ ä¸æ¨èï¼šåœ¨ useEffect ä¸­ç›´æ¥è¯·æ±‚æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> UserProfile <span style="color:#666">=</span> ({ userId }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [user, setUser] <span style="color:#666">=</span> useState(<span style="color:#a2f;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [error, setError] <span style="color:#666">=</span> useState(<span style="color:#a2f;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    fetchUser(userId)
</span></span><span style="display:flex;"><span>      .then((data) =&gt; setUser(data))
</span></span><span style="display:flex;"><span>      .<span style="color:#a2f;font-weight:bold">catch</span>((err) =&gt; setError(err));
</span></span><span style="display:flex;"><span>  }, [userId]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">if</span> (error) <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;<span style="color:#a2f">Error</span><span style="color:#666">:</span> {error.message}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>user) <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;Loading...&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;{user.name}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// âœ… æ¨èï¼šä½¿ç”¨è‡ªå®šä¹‰ Hook å°è£…æ•°æ®è¯·æ±‚é€»è¾‘
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> useUser <span style="color:#666">=</span> (userId) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [state, setState] <span style="color:#666">=</span> useState({
</span></span><span style="display:flex;"><span>    data<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">null</span>,
</span></span><span style="display:flex;"><span>    error<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">null</span>,
</span></span><span style="display:flex;"><span>    loading<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">let</span> mounted <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> loadUser <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        setState((prev) =&gt; ({ ...prev, loading<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">true</span> }));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">const</span> data <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">await</span> fetchUser(userId);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (mounted) {
</span></span><span style="display:flex;"><span>          setState({ data, loading<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span>, error<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">null</span> });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      } <span style="color:#a2f;font-weight:bold">catch</span> (error) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (mounted) {
</span></span><span style="display:flex;"><span>          setState({ data<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">null</span>, loading<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span>, error });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    loadUser();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> () =&gt; {
</span></span><span style="display:flex;"><span>      mounted <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }, [userId]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> state;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ä½¿ç”¨è‡ªå®šä¹‰ Hook
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> UserProfile <span style="color:#666">=</span> ({ userId }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> { data<span style="color:#666">:</span> user, error, loading } <span style="color:#666">=</span> useUser(userId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">if</span> (loading) <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;Loading...&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">if</span> (error) <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;<span style="color:#a2f">Error</span><span style="color:#666">:</span> {error.message}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> &lt;<span style="color:#008000;font-weight:bold">div</span>&gt;{user.name}&lt;/<span style="color:#008000;font-weight:bold">div</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="5-è®¢é˜…ä¸å–æ¶ˆè®¢é˜…">5. è®¢é˜…ä¸å–æ¶ˆè®¢é˜… <a href="#5-%e8%ae%a2%e9%98%85%e4%b8%8e%e5%8f%96%e6%b6%88%e8%ae%a2%e9%98%85" class="anchor">ğŸ”—</a></h3><p>è¿™ç§åœºæ™¯ç¡®å®éœ€è¦ä½¿ç”¨ useEffectï¼Œä½†è¦æ³¨æ„æ¸…ç†å‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> ChatRoom <span style="color:#666">=</span> ({ roomId }) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> [messages, setMessages] <span style="color:#666">=</span> useState([]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> connection <span style="color:#666">=</span> createConnection(roomId);
</span></span><span style="display:flex;"><span>    connection.connect();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> handleMessage <span style="color:#666">=</span> (message) =&gt; {
</span></span><span style="display:flex;"><span>      setMessages(prev =&gt; [...prev, message]);
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    connection.on(<span style="color:#b44">&#39;message&#39;</span>, handleMessage);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// æ¸…ç†å‡½æ•°ï¼šæ–­å¼€è¿æ¥å¹¶ç§»é™¤äº‹ä»¶ç›‘å¬
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">return</span> () =&gt; {
</span></span><span style="display:flex;"><span>      connection.off(<span style="color:#b44">&#39;message&#39;</span>, handleMessage);
</span></span><span style="display:flex;"><span>      connection.disconnect();
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }, [roomId]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> (<span style="color:#080;font-style:italic">/* æ¸²æŸ“é€»è¾‘ */</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="æœ€ä½³å®è·µæ€»ç»“">æœ€ä½³å®è·µæ€»ç»“ <a href="#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93" class="anchor">ğŸ”—</a></h3><ol>
<li>
<p><strong>ä¼˜å…ˆè€ƒè™‘äº‹ä»¶å¤„ç†å‡½æ•°</strong>ï¼šå¦‚æœå‰¯ä½œç”¨æ˜¯ç”±ç”¨æˆ·äº¤äº’è§¦å‘çš„ï¼ŒæŠŠå®ƒæ”¾åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨æ´¾ç”ŸçŠ¶æ€</strong>ï¼šå¦‚æœæŸä¸ªçŠ¶æ€å¯ä»¥ç”±å…¶ä»–çŠ¶æ€è®¡ç®—å¾—å‡ºï¼Œç›´æ¥è®¡ç®—è€Œä¸æ˜¯ä½¿ç”¨ effectã€‚</p>
</li>
<li>
<p><strong>åˆç†ä½¿ç”¨ useMemo</strong>ï¼šå¯¹äºè®¡ç®—é‡å¤§çš„æ´¾ç”ŸçŠ¶æ€ï¼Œä½¿ç”¨ useMemo ç¼“å­˜ç»“æœã€‚</p>
</li>
<li>
<p><strong>æŠ½è±¡å¤æ‚é€»è¾‘</strong>ï¼šå°†å¤æ‚çš„æ•°æ®è·å–ã€è®¢é˜…ç­‰é€»è¾‘å°è£…æˆè‡ªå®šä¹‰ Hookã€‚</p>
</li>
<li>
<p><strong>æ³¨æ„æ¸…ç†å·¥ä½œ</strong>ï¼šå½“ä½¿ç”¨ useEffect æ—¶ï¼Œè®°å¾—å¤„ç†æ¸…ç†å·¥ä½œï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
</li>
<li>
<p><strong>æ§åˆ¶ä¾èµ–é¡¹</strong>ï¼šä»”ç»†ç®¡ç† useEffect çš„ä¾èµ–æ•°ç»„ï¼Œé¿å…é—æ¼æˆ–åŒ…å«ä¸å¿…è¦çš„ä¾èµ–ã€‚</p>
</li>
</ol>
<blockquote>
<p>æœ¬æ–‡æŒç»­æ›´æ–°ä¸­&hellip;</p></blockquote>
      </div>
      <div class="my-toc">
        
        
  
    <aside class="toc">
      <details open>
          <summary>
             ç›®å½•
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#æ·±å…¥ç†è§£ç»„ä»¶æ¸²æŸ“ä¼˜åŒ–">æ·±å…¥ç†è§£ç»„ä»¶æ¸²æŸ“ä¼˜åŒ–</a>
      <ul>
        <li><a href="#ä½•æ—¶ä½¿ç”¨-reactmemo">ä½•æ—¶ä½¿ç”¨ React.memo</a></li>
      </ul>
    </li>
    <li><a href="#ç»„ä»¶è®¾è®¡çš„è‰ºæœ¯">ç»„ä»¶è®¾è®¡çš„è‰ºæœ¯</a>
      <ul>
        <li><a href="#ç»„ä»¶åˆ†å±‚æ¶æ„">ç»„ä»¶åˆ†å±‚æ¶æ„</a></li>
        <li><a href="#ç»„ä»¶é€šä¿¡æœ€ä½³å®è·µ">ç»„ä»¶é€šä¿¡æœ€ä½³å®è·µ</a></li>
      </ul>
    </li>
    <li><a href="#çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ">çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ</a>
      <ul>
        <li><a href="#æœ¬åœ°çŠ¶æ€ç®¡ç†">æœ¬åœ°çŠ¶æ€ç®¡ç†</a></li>
        <li><a href="#å…¨å±€çŠ¶æ€ç®¡ç†">å…¨å±€çŠ¶æ€ç®¡ç†</a></li>
      </ul>
    </li>
    <li><a href="#react-18-æ–°ç‰¹æ€§åº”ç”¨">React 18 æ–°ç‰¹æ€§åº”ç”¨</a>
      <ul>
        <li><a href="#å¹¶å‘æ¸²æŸ“å®è·µ">å¹¶å‘æ¸²æŸ“å®è·µ</a></li>
      </ul>
    </li>
    <li><a href="#åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–">åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–</a>
      <ul>
        <li><a href="#è™šæ‹Ÿåˆ—è¡¨å®ç°">è™šæ‹Ÿåˆ—è¡¨å®ç°</a></li>
        <li><a href="#key-çš„æœ€ä½³å®è·µ">Key çš„æœ€ä½³å®è·µ</a></li>
      </ul>
    </li>
    <li><a href="#æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ">æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ</a>
      <ul>
        <li><a href="#æœ¬åœ°å­˜å‚¨å®ç°">æœ¬åœ°å­˜å‚¨å®ç°</a></li>
        <li><a href="#æœåŠ¡å™¨å­˜å‚¨å®ç°">æœåŠ¡å™¨å­˜å‚¨å®ç°</a></li>
      </ul>
    </li>
    <li><a href="#ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨-useeffect">ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨ useEffect</a>
      <ul>
        <li><a href="#1-äº‹ä»¶å¤„ç†ä¸­çš„å‰¯ä½œç”¨">1. äº‹ä»¶å¤„ç†ä¸­çš„å‰¯ä½œç”¨</a></li>
        <li><a href="#2-props-æ”¹å˜åçš„è®¡ç®—">2. props æ”¹å˜åçš„è®¡ç®—</a></li>
        <li><a href="#3-çŠ¶æ€è”åŠ¨æ›´æ–°">3. çŠ¶æ€è”åŠ¨æ›´æ–°</a></li>
        <li><a href="#4-æ•°æ®è¯·æ±‚">4. æ•°æ®è¯·æ±‚</a></li>
        <li><a href="#5-è®¢é˜…ä¸å–æ¶ˆè®¢é˜…">5. è®¢é˜…ä¸å–æ¶ˆè®¢é˜…</a></li>
        <li><a href="#æœ€ä½³å®è·µæ€»ç»“">æœ€ä½³å®è·µæ€»ç»“</a></li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


        
      </div>
    </div>

    
        <div class="tags">
            
                <a href="https://example.com/tags/react">React</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
       Â© Copyright 
       2025 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       é—«åº†å›½
    
    </div>

</footer>



  </body>
</html>
