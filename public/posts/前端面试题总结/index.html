<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>å‰ç«¯é¢è¯•é¢˜æ€»ç»“ | é—«åº†å›½çš„ä¸ªäººç½‘ç«™</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="CSS ğŸ”—BFC ğŸ”—BFC æ˜¯å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

å†…éƒ¨çš„ Box å‚ç›´æ’åˆ—
margin ä¼šé‡å 
å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´ 
ä¸ä¼šä¸æµ®åŠ¨å…ƒç´ é‡å 

ç›’å­æ¨¡å‹ ğŸ”—ä¸¤ç§ç›’æ¨¡å‹ï¼š

æ ‡å‡†ç›’æ¨¡å‹ï¼šwidth = content
IE ç›’æ¨¡å‹ï¼šwidth = content &#43; padding &#43; border

position å®šä½ ğŸ”—äº”ç§å®šä½æ–¹å¼ï¼š">
<meta name="generator" content="Hugo 0.147.7">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />








    <style>
      .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background-color: #333;
        color: #fff;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: none;
        transition: background-color 0.3s;
      }
      .back-to-top:hover {
        background-color: #555;
      }
      .back-to-top svg {
        width: 20px;
        height: 20px;
      }
    </style>
  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>é¦–é¡µ</a>
	
	<a href="/posts">å½’æ¡£</a>
	<a href="/tags">æ ‡ç­¾</a>
	<a href="/about">å…³äº</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">å‰ç«¯é¢è¯•é¢˜æ€»ç»“</h1>

    <div class="tip">
        <time datetime="2025-06-01 00:00:00 &#43;0000 UTC">2025å¹´06æœˆ01æ—¥</time>
        <span class="split">
          Â·
        </span>
        <span>
          1718å­—
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          4åˆ†é’Ÿ
        </span>
    </div>


    <div class="content">
      <div>
        <h2 id="css">CSS <a href="#css" class="anchor">ğŸ”—</a></h2><h3 id="bfc">BFC <a href="#bfc" class="anchor">ğŸ”—</a></h3><p>BFC æ˜¯å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å†…éƒ¨çš„ Box å‚ç›´æ’åˆ—</li>
<li>margin ä¼šé‡å </li>
<li>å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´ </li>
<li>ä¸ä¼šä¸æµ®åŠ¨å…ƒç´ é‡å </li>
</ul>
<h3 id="ç›’å­æ¨¡å‹">ç›’å­æ¨¡å‹ <a href="#%e7%9b%92%e5%ad%90%e6%a8%a1%e5%9e%8b" class="anchor">ğŸ”—</a></h3><p>ä¸¤ç§ç›’æ¨¡å‹ï¼š</p>
<ol>
<li>æ ‡å‡†ç›’æ¨¡å‹ï¼šwidth = content</li>
<li>IE ç›’æ¨¡å‹ï¼šwidth = content + padding + border</li>
</ol>
<h3 id="position-å®šä½">position å®šä½ <a href="#position-%e5%ae%9a%e4%bd%8d" class="anchor">ğŸ”—</a></h3><p>äº”ç§å®šä½æ–¹å¼ï¼š</p>
<ul>
<li>staticï¼šé»˜è®¤å€¼</li>
<li>relativeï¼šç›¸å¯¹å®šä½</li>
<li>absoluteï¼šç»å¯¹å®šä½</li>
<li>fixedï¼šå›ºå®šå®šä½</li>
<li>stickyï¼šç²˜æ€§å®šä½</li>
</ul>
<h3 id="emrempx">emã€remã€px <a href="#emrempx" class="anchor">ğŸ”—</a></h3><ul>
<li>pxï¼šå›ºå®šåƒç´ å•ä½</li>
<li>emï¼šç›¸å¯¹çˆ¶å…ƒç´ å­—ä½“å¤§å°</li>
<li>remï¼šç›¸å¯¹æ ¹å…ƒç´ å­—ä½“å¤§å°</li>
</ul>
<h3 id="åŸºçº¿">åŸºçº¿ <a href="#%e5%9f%ba%e7%ba%bf" class="anchor">ğŸ”—</a></h3><ul>
<li>æ–‡å­—æ’ç‰ˆçš„åŸºå‡†çº¿</li>
<li>vertical-align å±æ€§</li>
<li>ç”¨äºæ–‡æœ¬å¯¹é½</li>
</ul>
<h2 id="javascript">JavaScript <a href="#javascript" class="anchor">ğŸ”—</a></h2><h3 id="åŸå‹ä¸åŸå‹é“¾">åŸå‹ä¸åŸå‹é“¾ <a href="#%e5%8e%9f%e5%9e%8b%e4%b8%8e%e5%8e%9f%e5%9e%8b%e9%93%be" class="anchor">ğŸ”—</a></h3><h4 id="1-åŸºæœ¬æ¦‚å¿µ">1. åŸºæœ¬æ¦‚å¿µ <a href="#1-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// æ„é€ å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">function</span> Person(name) {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">this</span>.name <span style="color:#666">=</span> name;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">const</span> person <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> Person(<span style="color:#b44">&#34;å¼ ä¸‰&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// åŸå‹å…³ç³»
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>console.log(person.__proto__ <span style="color:#666">===</span> Person.prototype); <span style="color:#080;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>console.log(Person.prototype.constructor <span style="color:#666">===</span> Person); <span style="color:#080;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>console.log(Person.prototype.__proto__ <span style="color:#666">===</span> <span style="color:#a2f">Object</span>.prototype); <span style="color:#080;font-style:italic">// true
</span></span></span></code></pre></div><h4 id="2-åŸå‹é“¾æŸ¥æ‰¾æœºåˆ¶">2. åŸå‹é“¾æŸ¥æ‰¾æœºåˆ¶ <a href="#2-%e5%8e%9f%e5%9e%8b%e9%93%be%e6%9f%a5%e6%89%be%e6%9c%ba%e5%88%b6" class="anchor">ğŸ”—</a></h4><ul>
<li>å½“è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼Œä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ï¼š
<ol>
<li>å¯¹è±¡è‡ªèº«å±æ€§</li>
<li>å¯¹è±¡åŸå‹ï¼ˆ<code>__proto__</code>ï¼‰</li>
<li>åŸå‹é“¾ä¸Šçš„å…¶ä»–åŸå‹</li>
<li>ç›´åˆ°æ‰¾åˆ° <code>Object.prototype</code>ï¼ˆåŸå‹é“¾ç»ˆç‚¹ï¼‰</li>
</ol>
</li>
</ul>
<h4 id="3-é‡è¦ç‰¹æ€§">3. é‡è¦ç‰¹æ€§ <a href="#3-%e9%87%8d%e8%a6%81%e7%89%b9%e6%80%a7" class="anchor">ğŸ”—</a></h4><ul>
<li>åŸå‹é“¾ç»§æ‰¿</li>
<li>å±æ€§å…±äº«</li>
<li>æ„é€ å‡½æ•°ä¸åŸå‹çš„å…³ç³»</li>
<li><code>instanceof</code> åˆ¤æ–­åŸç†</li>
</ul>
<h3 id="äº‹ä»¶å¾ªç¯æœºåˆ¶">äº‹ä»¶å¾ªç¯æœºåˆ¶ <a href="#%e4%ba%8b%e4%bb%b6%e5%be%aa%e7%8e%af%e6%9c%ba%e5%88%b6" class="anchor">ğŸ”—</a></h3><h4 id="1-åŸºæœ¬æ¦‚å¿µ-1">1. åŸºæœ¬æ¦‚å¿µ <a href="#1-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5-1" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// å®ä»»åŠ¡ï¼ˆMacroTaskï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>setTimeout(() =&gt; {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#b44">&#34;å®ä»»åŠ¡1&#34;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// å¾®ä»»åŠ¡ï¼ˆMicroTaskï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f">Promise</span>.resolve().then(() =&gt; {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#b44">&#34;å¾®ä»»åŠ¡1&#34;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// æ‰§è¡Œé¡ºåºï¼šå¾®ä»»åŠ¡ &gt; å®ä»»åŠ¡
</span></span></span></code></pre></div><h4 id="2-æ‰§è¡Œé¡ºåº">2. æ‰§è¡Œé¡ºåº <a href="#2-%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f" class="anchor">ğŸ”—</a></h4><ol>
<li>åŒæ­¥ä»£ç ï¼ˆä¸»çº¿ç¨‹ï¼‰</li>
<li>å¾®ä»»åŠ¡é˜Ÿåˆ—
<ul>
<li>Promise.then/catch/finally</li>
<li>process.nextTick</li>
<li>MutationObserver</li>
</ul>
</li>
<li>å®ä»»åŠ¡é˜Ÿåˆ—
<ul>
<li>setTimeout/setInterval</li>
<li>setImmediate</li>
<li>I/O</li>
<li>UI æ¸²æŸ“</li>
</ul>
</li>
</ol>
<h4 id="3-ç‰¹ç‚¹">3. ç‰¹ç‚¹ <a href="#3-%e7%89%b9%e7%82%b9" class="anchor">ğŸ”—</a></h4><ul>
<li>å•çº¿ç¨‹æ‰§è¡Œ</li>
<li>å¼‚æ­¥ä»»åŠ¡å¤„ç†</li>
<li>ä»»åŠ¡ä¼˜å…ˆçº§</li>
<li>äº‹ä»¶å¾ªç¯è¿‡ç¨‹</li>
</ul>
<h3 id="async-ä¸-deferonload-ä¸-domcontentloaded">async ä¸ deferã€onLoad ä¸ DOMContentLoaded <a href="#async-%e4%b8%8e-deferonload-%e4%b8%8e-domcontentloaded" class="anchor">ğŸ”—</a></h3><h4 id="1-script-æ ‡ç­¾å±æ€§">1. script æ ‡ç­¾å±æ€§ <a href="#1-script-%e6%a0%87%e7%ad%be%e5%b1%9e%e6%80%a7" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#080;font-style:italic">&lt;!-- æ™®é€šåŠ è½½ --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#008000;font-weight:bold">script</span> <span style="color:#b44">src</span><span style="color:#666">=</span><span style="color:#b44">&#34;normal.js&#34;</span>&gt;&lt;/<span style="color:#008000;font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">&lt;!-- async å¼‚æ­¥åŠ è½½ --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#008000;font-weight:bold">script</span> <span style="color:#b44">async</span> <span style="color:#b44">src</span><span style="color:#666">=</span><span style="color:#b44">&#34;async.js&#34;</span>&gt;&lt;/<span style="color:#008000;font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">&lt;!-- defer å»¶è¿ŸåŠ è½½ --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#008000;font-weight:bold">script</span> <span style="color:#b44">defer</span> <span style="color:#b44">src</span><span style="color:#666">=</span><span style="color:#b44">&#34;defer.js&#34;</span>&gt;&lt;/<span style="color:#008000;font-weight:bold">script</span>&gt;
</span></span></code></pre></div><h4 id="2-åŠ è½½é¡ºåºå¯¹æ¯”">2. åŠ è½½é¡ºåºå¯¹æ¯” <a href="#2-%e5%8a%a0%e8%bd%bd%e9%a1%ba%e5%ba%8f%e5%af%b9%e6%af%94" class="anchor">ğŸ”—</a></h4><table>
  <thead>
      <tr>
          <th>å±æ€§</th>
          <th>æ‰§è¡Œæ—¶æœº</th>
          <th>é˜»å¡æƒ…å†µ</th>
          <th>é€‚ç”¨åœºæ™¯</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>æ— å±æ€§</td>
          <td>ç«‹å³æ‰§è¡Œ</td>
          <td>é˜»å¡è§£æ</td>
          <td>ä¾èµ– DOM çš„è„šæœ¬</td>
      </tr>
      <tr>
          <td>async</td>
          <td>ä¸‹è½½å®Œç«‹å³æ‰§è¡Œ</td>
          <td>ä¸é˜»å¡è§£æ</td>
          <td>ç‹¬ç«‹è„šæœ¬</td>
      </tr>
      <tr>
          <td>defer</td>
          <td>DOMContentLoaded å‰æ‰§è¡Œ</td>
          <td>ä¸é˜»å¡è§£æ</td>
          <td>ä¾èµ–å…¶ä»–è„šæœ¬</td>
      </tr>
  </tbody>
</table>
<h4 id="3-äº‹ä»¶è§¦å‘æ—¶æœº">3. äº‹ä»¶è§¦å‘æ—¶æœº <a href="#3-%e4%ba%8b%e4%bb%b6%e8%a7%a6%e5%8f%91%e6%97%b6%e6%9c%ba" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// DOMContentLoadedï¼šDOM è§£æå®Œæˆæ—¶è§¦å‘
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f">document</span>.addEventListener(<span style="color:#b44">&#34;DOMContentLoaded&#34;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#b44">&#34;DOM è§£æå®Œæˆ&#34;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// loadï¼šé¡µé¢æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆæ—¶è§¦å‘
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f">window</span>.addEventListener(<span style="color:#b44">&#34;load&#34;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#b44">&#34;é¡µé¢åŠ è½½å®Œæˆ&#34;</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="4-æ‰§è¡Œé¡ºåº">4. æ‰§è¡Œé¡ºåº <a href="#4-%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f" class="anchor">ğŸ”—</a></h4><ol>
<li>DOM è§£æ</li>
<li>DOMContentLoaded äº‹ä»¶</li>
<li>èµ„æºåŠ è½½ï¼ˆå›¾ç‰‡ã€æ ·å¼ç­‰ï¼‰</li>
<li>load äº‹ä»¶</li>
</ol>
<h4 id="5-ä½¿ç”¨å»ºè®®">5. ä½¿ç”¨å»ºè®® <a href="#5-%e4%bd%bf%e7%94%a8%e5%bb%ba%e8%ae%ae" class="anchor">ğŸ”—</a></h4><ul>
<li>å…³é”®è„šæœ¬ï¼šä½¿ç”¨ defer</li>
<li>ç‹¬ç«‹è„šæœ¬ï¼šä½¿ç”¨ async</li>
<li>ä¾èµ– DOMï¼šç­‰å¾… DOMContentLoaded</li>
<li>ä¾èµ–èµ„æºï¼šç­‰å¾… load</li>
</ul>
<h3 id="æµè§ˆå™¨ç¼“å­˜">æµè§ˆå™¨ç¼“å­˜ <a href="#%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98" class="anchor">ğŸ”—</a></h3><h4 id="å¼ºç¼“å­˜">å¼ºç¼“å­˜ <a href="#%e5%bc%ba%e7%bc%93%e5%ad%98" class="anchor">ğŸ”—</a></h4><ol>
<li>å¼ºç¼“å­˜ä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºã€‚</li>
<li>ç›¸å…³å­—æ®µ</li>
</ol>
<ul>
<li><strong>Expires</strong>ï¼šè¿‡æœŸæ—¶é—´ï¼ˆHTTP/1.0ï¼‰
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="">Expires: Wed, 21 Oct 2023 07:28:00 GMT
</span></span></span></code></pre></div></li>
<li><strong>Cache-Control</strong>ï¼šç¼“å­˜æ§åˆ¶ï¼ˆHTTP/1.1ï¼‰
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="">Cache-Control: max-age=31536000
</span></span></span></code></pre></div><ul>
<li><code>max-age</code>ï¼šæœ€å¤§ç¼“å­˜æ—¶é—´</li>
<li><code>no-cache</code>ï¼šéœ€è¦éªŒè¯</li>
<li><code>no-store</code>ï¼šä¸ç¼“å­˜</li>
<li><code>private</code>ï¼šä»…æµè§ˆå™¨ç¼“å­˜</li>
<li><code>public</code>ï¼šå…è®¸ä¸­é—´ä»£ç†ç¼“å­˜</li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p>ä¼˜å…ˆçº§</p>
<p>Cache-Control &gt; Expires</p>
</li>
</ol>
<h4 id="åå•†ç¼“å­˜">åå•†ç¼“å­˜ <a href="#%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98" class="anchor">ğŸ”—</a></h4><ol>
<li>åŸºæœ¬æ¦‚å¿µ</li>
</ol>
<p>åå•†ç¼“å­˜ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨åˆ¤æ–­èµ„æºæ˜¯å¦å¯ç”¨ã€‚</p>
<ol start="2">
<li>ç›¸å…³å­—æ®µ</li>
</ol>
<ul>
<li><strong>Last-Modified/If-Modified-Since</strong>ï¼šåŸºäºæ–‡ä»¶ä¿®æ”¹æ—¶é—´
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="">Last-Modified: Wed, 21 Oct 2023 07:28:00 GMT
</span></span></span><span style="display:flex;"><span><span style="">If-Modified-Since: Wed, 21 Oct 2023 07:28:00 GMT
</span></span></span></code></pre></div></li>
<li><strong>ETag/If-None-Match</strong>ï¼šåŸºäºæ–‡ä»¶å†…å®¹
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="">ETag: &#34;33a64df551425fcc55e4d42a148795d9f25f89d4&#34;
</span></span></span><span style="display:flex;"><span><span style="">If-None-Match: &#34;33a64df551425fcc55e4d42a148795d9f25f89d4&#34;
</span></span></span></code></pre></div></li>
</ul>
<ol start="3">
<li>
<p>ä¼˜å…ˆçº§</p>
<p>ETag &gt; Last-Modified</p>
</li>
<li>
<p>ç¼“å­˜æµç¨‹</p>
</li>
</ol>
<ul>
<li>æµè§ˆå™¨å‘èµ·è¯·æ±‚</li>
<li>æœåŠ¡å™¨è¿”å›èµ„æºï¼Œå¸¦ç¼“å­˜æ ‡è¯†</li>
<li>æµè§ˆå™¨ç¼“å­˜èµ„æº</li>
<li>å†æ¬¡è¯·æ±‚æ—¶ï¼Œæºå¸¦ç¼“å­˜æ ‡è¯†</li>
<li>æœåŠ¡å™¨åˆ¤æ–­èµ„æºæ˜¯å¦å¯ç”¨</li>
<li>è¿”å› 304 æˆ–æ–°èµ„æº</li>
</ul>
<ol start="5">
<li>Express å®ç°ç¤ºä¾‹</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> express <span style="color:#666">=</span> require(<span style="color:#b44">&#34;express&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> crypto <span style="color:#666">=</span> require(<span style="color:#b44">&#34;crypto&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> fs <span style="color:#666">=</span> require(<span style="color:#b44">&#34;fs&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> path <span style="color:#666">=</span> require(<span style="color:#b44">&#34;path&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">const</span> app <span style="color:#666">=</span> express();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// æ¨¡æ‹Ÿæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">let</span> data <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>  content<span style="color:#666">:</span> <span style="color:#b44">&#34;Hello World&#34;</span>,
</span></span><span style="display:flex;"><span>  lastModified<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">new</span> <span style="color:#a2f">Date</span>().toUTCString(),
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// è®¡ç®— ETag
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">function</span> calculateETag(content) {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">return</span> crypto.createHash(<span style="color:#b44">&#34;md5&#34;</span>).update(content).digest(<span style="color:#b44">&#34;hex&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ä½¿ç”¨ Last-Modified çš„ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>app.get(<span style="color:#b44">&#34;/last-modified&#34;</span>, (req, res) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> ifModifiedSince <span style="color:#666">=</span> req.headers[<span style="color:#b44">&#34;if-modified-since&#34;</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">if</span> (ifModifiedSince <span style="color:#666">&amp;&amp;</span> ifModifiedSince <span style="color:#666">===</span> data.lastModified) {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// èµ„æºæœªä¿®æ”¹ï¼Œè¿”å› 304
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res.status(<span style="color:#666">304</span>).end();
</span></span><span style="display:flex;"><span>  } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// èµ„æºå·²ä¿®æ”¹ï¼Œè¿”å›æ–°æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res.setHeader(<span style="color:#b44">&#34;Last-Modified&#34;</span>, data.lastModified);
</span></span><span style="display:flex;"><span>    res.json(data);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// ä½¿ç”¨ ETag çš„ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>app.get(<span style="color:#b44">&#34;/etag&#34;</span>, (req, res) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> ifNoneMatch <span style="color:#666">=</span> req.headers[<span style="color:#b44">&#34;if-none-match&#34;</span>];
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> etag <span style="color:#666">=</span> calculateETag(data.content);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">if</span> (ifNoneMatch <span style="color:#666">&amp;&amp;</span> ifNoneMatch <span style="color:#666">===</span> etag) {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// èµ„æºæœªä¿®æ”¹ï¼Œè¿”å› 304
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res.status(<span style="color:#666">304</span>).end();
</span></span><span style="display:flex;"><span>  } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// èµ„æºå·²ä¿®æ”¹ï¼Œè¿”å›æ–°æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res.setHeader(<span style="color:#b44">&#34;ETag&#34;</span>, etag);
</span></span><span style="display:flex;"><span>    res.json(data);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// æ›´æ–°æ•°æ®çš„æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>app.post(<span style="color:#b44">&#34;/update&#34;</span>, (req, res) =&gt; {
</span></span><span style="display:flex;"><span>  data <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>    content<span style="color:#666">:</span> <span style="color:#b44">&#34;Updated Content&#34;</span>,
</span></span><span style="display:flex;"><span>    lastModified<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">new</span> <span style="color:#a2f">Date</span>().toUTCString(),
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  res.json({ message<span style="color:#666">:</span> <span style="color:#b44">&#34;Data updated&#34;</span> });
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">// æ–‡ä»¶åå•†ç¼“å­˜ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>app.get(<span style="color:#b44">&#34;/file&#34;</span>, (req, res) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a2f;font-weight:bold">const</span> filePath <span style="color:#666">=</span> path.join(__dirname, <span style="color:#b44">&#34;example.txt&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  fs.stat(filePath, (err, stats) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (err) {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">return</span> res.status(<span style="color:#666">404</span>).end();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> ifModifiedSince <span style="color:#666">=</span> req.headers[<span style="color:#b44">&#34;if-modified-since&#34;</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">const</span> ifNoneMatch <span style="color:#666">=</span> req.headers[<span style="color:#b44">&#34;if-none-match&#34;</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// ä½¿ç”¨ Last-Modified
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">if</span> (
</span></span><span style="display:flex;"><span>      ifModifiedSince <span style="color:#666">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">new</span> <span style="color:#a2f">Date</span>(ifModifiedSince).getTime() <span style="color:#666">&gt;=</span> stats.mtime.getTime()
</span></span><span style="display:flex;"><span>    ) {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">return</span> res.status(<span style="color:#666">304</span>).end();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// ä½¿ç”¨ ETag
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">const</span> etag <span style="color:#666">=</span> calculateETag(stats.size <span style="color:#666">+</span> stats.mtime.getTime().toString());
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (ifNoneMatch <span style="color:#666">&amp;&amp;</span> ifNoneMatch <span style="color:#666">===</span> etag) {
</span></span><span style="display:flex;"><span>      <span style="color:#a2f;font-weight:bold">return</span> res.status(<span style="color:#666">304</span>).end();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// è®¾ç½®ç¼“å­˜å¤´
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res.setHeader(<span style="color:#b44">&#34;Last-Modified&#34;</span>, stats.mtime.toUTCString());
</span></span><span style="display:flex;"><span>    res.setHeader(<span style="color:#b44">&#34;ETag&#34;</span>, etag);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// å‘é€æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res.sendFile(filePath);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.listen(<span style="color:#666">3000</span>, () =&gt; {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#b44">&#34;Server running on port 3000&#34;</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><ol start="6">
<li>æµ‹è¯•æ–¹æ³•</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#080;font-style:italic"># 1. é¦–æ¬¡è¯·æ±‚</span>
</span></span><span style="display:flex;"><span>curl -i http://localhost:3000/etag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># 2. ä½¿ç”¨ä¸Šæ¬¡è¿”å›çš„ ETag å†æ¬¡è¯·æ±‚</span>
</span></span><span style="display:flex;"><span>curl -i -H <span style="color:#b44">&#39;If-None-Match: &#34;etagå€¼&#34;&#39;</span> http://localhost:3000/etag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># 3. æ›´æ–°æ•°æ®</span>
</span></span><span style="display:flex;"><span>curl -X POST http://localhost:3000/update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># 4. å†æ¬¡è¯·æ±‚ï¼ˆå°†è¿”å›æ–°æ•°æ®ï¼‰</span>
</span></span><span style="display:flex;"><span>curl -i http://localhost:3000/etag
</span></span></code></pre></div><ol start="7">
<li>å®ç°è¦ç‚¹</li>
</ol>
<ul>
<li>ä½¿ç”¨ <code>Last-Modified</code> æ—¶ï¼Œéœ€è¦ç²¾ç¡®åˆ°ç§’çº§</li>
<li>ä½¿ç”¨ <code>ETag</code> æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼</li>
<li>ä¸¤ç§æ–¹å¼å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œæä¾›åŒé‡éªŒè¯</li>
<li>è€ƒè™‘ä½¿ç”¨ç¼“å­˜ä¸­é—´ä»¶ï¼ˆå¦‚ <code>express-etag</code>ï¼‰</li>
</ul>

      </div>
      <div class="my-toc">
        
        
  
    <aside class="toc">
      <details open>
          <summary>
             ç›®å½•
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#css">CSS</a>
      <ul>
        <li><a href="#bfc">BFC</a></li>
        <li><a href="#ç›’å­æ¨¡å‹">ç›’å­æ¨¡å‹</a></li>
        <li><a href="#position-å®šä½">position å®šä½</a></li>
        <li><a href="#emrempx">emã€remã€px</a></li>
        <li><a href="#åŸºçº¿">åŸºçº¿</a></li>
      </ul>
    </li>
    <li><a href="#javascript">JavaScript</a>
      <ul>
        <li><a href="#åŸå‹ä¸åŸå‹é“¾">åŸå‹ä¸åŸå‹é“¾</a></li>
        <li><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶">äº‹ä»¶å¾ªç¯æœºåˆ¶</a></li>
        <li><a href="#async-ä¸-deferonload-ä¸-domcontentloaded">async ä¸ deferã€onLoad ä¸ DOMContentLoaded</a></li>
        <li><a href="#æµè§ˆå™¨ç¼“å­˜">æµè§ˆå™¨ç¼“å­˜</a></li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


        
      </div>
    </div>

    
        <div class="tags">
            
                <a href="http://localhost:1313/tags/%E9%9D%A2%E8%AF%95">é¢è¯•</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
       Â© Copyright 
       2025 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       é—«åº†å›½
    
    </div>

</footer>




    <button class="back-to-top" id="backToTop" title="å›åˆ°é¡¶éƒ¨">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 19V5M5 12l7-7 7 7"/>
      </svg>
    </button>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var backToTopButton = document.getElementById('backToTop');
        
        
        window.onscroll = function() {
          if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            backToTopButton.style.display = 'flex';
          } else {
            backToTopButton.style.display = 'none';
          }
        };
        
        
        backToTopButton.addEventListener('click', function() {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });
      });
    </script>
  </body>
</html>
